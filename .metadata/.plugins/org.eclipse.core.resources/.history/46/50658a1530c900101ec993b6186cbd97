package com.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.model.Claim;
import com.model.ClaimRequest;
import com.repository.ClaimRepository;

@Service
public class ClaimService {
	 @Autowired
	    private ClaimRepository repo;

	    @Autowired
	    private ClaimProducer producer;

	    public Claim CreateClaim(ClaimRequest req) {
		Claim claim= new Claim();
		claim.setEmpid(req.getEmpId());
		claim.setAmount(req.getAmount());
		claim.setDescription(req.getDescription());
		
		Claim saved=repo.save(claim);
		producer.sendClaim(saved);
		return saved;
	}
}
